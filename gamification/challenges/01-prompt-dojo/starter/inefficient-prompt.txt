Hello! I hope you're having a great day. I'm working on a really important project for my company and I need your help with something. We're building a web application using Python and Flask, which is a micro web framework written in Python. It's really popular and lightweight, and we've decided to use it for our backend API.

What I need from you is to create a Dockerfile. A Dockerfile is a text document that contains all the commands a user could call on the command line to assemble an image. Do you know what Docker is? It's a platform designed to help developers build, share, and run container applications. We use it at my company for deploying applications.

So here's what I need in the Dockerfile:

First, I want you to use Python 3.11 as the base image. Python 3.11 is the latest version and it has some performance improvements over previous versions. We want to stay current with technology.

Second, this is really important for security reasons - I need the application to run as a non-root user. Running as root is a security risk because if someone compromises the application, they would have root access to the container. That would be bad. So please make sure to create a new user and switch to that user. You can call the user something like "appuser" or "flask" or whatever you think is best.

Third, we need a health check. Health checks are important in production environments because they allow the orchestration platform (we use Kubernetes by the way) to know if the container is healthy and ready to receive traffic. The health check should hit an endpoint on the Flask application. You can use the /health endpoint or /healthz or whatever is conventional.

Fourth, please install the dependencies properly. We have a requirements.txt file that lists all our Python dependencies. You should copy this file into the container and use pip to install the dependencies. Make sure to use pip install with the requirements file.

Fifth, the entry point should start the Flask application. We typically run it with "python app.py" or you could use "flask run" command. Either works. Just make sure the application starts when the container starts.

Oh, and one more thing - it would be great if you could use a multi-stage build. Multi-stage builds are a Docker feature that allows you to use multiple FROM statements in your Dockerfile. This can help reduce the final image size by only including what's necessary in the final image. But if that's too complicated, you don't have to do it. It's optional.

Also, please make sure the Dockerfile follows best practices. Things like:
- Using specific version tags instead of "latest"
- Minimizing the number of layers
- Properly ordering commands to maximize cache usage
- Cleaning up unnecessary files
- Using .dockerignore file (though you won't create that file, just mention if it would be useful)

And please add comments in the Dockerfile so my team can understand what each section does. Comments are important for maintainability.

The Flask application will run on port 5000 by default, so make sure to expose that port.

Let me know if you have any questions or need any clarification! I'm here to help provide more context if needed.

Thank you so much for your assistance with this! I really appreciate it.
